<app-page-header [pageHeaderInfo]="pageHeaderInfo" [extraTpl]="huongdanTpl"></app-page-header>
<ng-template #huongdanTpl>
  <button nz-button nzType="primary" [nzSize]="'large'" nzShape="round" (click)="showVideo()">
      <span nz-icon nzType="star" nzTheme="outline"></span>{{formItemNm[4]}}
  </button>
</ng-template>
<div class="normal-table-wrap">
    <nz-card nzHoverable [nzBodyStyle]="{ 'padding-bottom': 0 }" class="m-b-10">
        <form nz-form>
            <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24 }">
                <div nz-col [nzXXl]="8" [nzXl]="8" [nzLg]="8" [nzMd]="12" [nzSm]="24" [nzXs]="24">
                    <nz-form-item>
                        <nz-form-label [nzFor]="">{{formItemNm[5]}}</nz-form-label>
                        <nz-form-control>
                          <input nz-input name="datacd" [(ngModel)]="searchParam.datacd" placeholder="search mã kho"/>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col [nzXXl]="8" [nzXl]="8" [nzLg]="8" [nzMd]="12" [nzSm]="24" [nzXs]="24"></div>
                <div nz-col [nzXXl]="8" [nzXl]="8" [nzLg]="8" [nzMd]="12" [nzSm]="24" [nzXs]="24"  class="text-right p-0 m-b-10">
                    <button (click)="getDataList()" nz-button [nzType]="'primary'"> <i nz-icon nzType="search"></i>{{formItemNm[6]}}</button>
                    <button nz-button class="m-l-15" (click)="resetForm()"><i nz-icon nzType="close-circle" nzTheme="outline"></i>{{formItemNm[7]}}</button>
                </div>
            </div>
        </form>
    </nz-card>
    <ng-container *ngIf="tableConfig">
        <app-card-table-wrap [tableTitle]="formItemNm[8]" (reload)="reloadTable()" [btnTpl]="tableBtns">
            <app-ant-table 
            (selectedChange)="selectedChecked($event)"
            [checkedCashArrayFromComment]="checkedCashArray"
            (changePageSize)="changePageSize($event)"
            (changePageNum)="getDataList($event)"
            [tableConfig]="tableConfig"
            [tableData]="dataList"
          ></app-ant-table>
            
        </app-card-table-wrap>
        <ng-template #tableBtns>
            <button *appAuth="ActionCode.Spcm01103Add" (click)="add()" nz-button nzType="primary" class="m-r-8">
            <i nz-icon nzType="plus"></i>
            {{formItemNm[9]}}
            </button>
            <button *appAuth="ActionCode.Spcm01103DelAll" (click)="allDel()" nz-button nzType="default">
            <i nz-icon nzType="delete"></i>
            {{formItemNm[10]}}
            </button>
        </ng-template>
    </ng-container>
    <ng-template #operationTpl let-id="id">
        <span *appAuth="ActionCode.Spcm01103Update" class="operate-text">
            <!--  -->
            <button nz-button nzType="primary" nzGhost (click)="edit(id)">{{formItemNm[14]}}</button>
        </span>
        <span *appAuth="ActionCode.Spcm01103Del" class="operate-text">
            <!--  -->
            <button nz-button nzType="primary" nzGhost (click)="del(id)">{{formItemNm[15]}}</button>
        </span>
    </ng-template>
    <ng-template #linkTpl let-id="id" let-datacd="datacd">
        <a nz-button nzType="primary" (click)="showChildTable(id,datacd)">{{datacd}}</a>
    </ng-template>
</div>
<div *ngIf="showchildTable" class="normal-table-wrap">
    <nz-card nzHoverable [nzBodyStyle]="{ 'padding-bottom': 0 }" class="m-b-10">
        <ng-container *ngIf="tableConfigChild">
            <app-card-table-wrap [tableTitle]="TitleTableChild" (reload)="reloadTableChild()" [btnTpl]="tableBtnsChild">
                <app-ant-table 
                (selectedChange)="selectedCheckedChild($event)"
                [checkedCashArrayFromComment]="checkedCashArrayChild"
                (changePageSize)="changePageSizeChild($event)"
                (changePageNum)="getDataListChild($event)"
                [tableConfig]="tableConfigChild"
                [tableData]="dataListChild"
              ></app-ant-table>
            </app-card-table-wrap>
            <ng-template #tableBtnsChild>
                <button *appAuth="ActionCode.Spcm01103AddChild" (click)="addChild()" nz-button nzType="primary" class="m-r-8">
                    <i nz-icon nzType="plus"></i>
                    {{formItemNm[9]}} {{titleTablechild}} 
                    </button>
            </ng-template>
            <ng-template #TitleTableChild>
                <h3>Danh sách dịch vụ {{titleTablechild}}</h3>
            </ng-template>
        </ng-container>
       
    </nz-card>
</div>
<ng-template #operationchildTpl let-id="id">
    <span *appAuth="ActionCode.Spcm01103UpdateChild" class="operate-text">
        <button nz-button nzType="primary" nzGhost (click)="editChild(id)">Cập nhật</button>
    </span>
    <span *appAuth="ActionCode.Spcm01103DelChild" class="operate-text">
        <button nz-button nzType="primary" nzGhost (click)="delChild(id)">Xóa</button>
    </span>
</ng-template>
<ng-template #linkchildTpl let-id="id" let-tennhacungcap="tennhacungcap">
    <a nz-button (click)="showCongno(id,tennhacungcap)" nzType="link">{{tennhacungcap}}</a>
</ng-template>


<div *ngIf="!showtableCNDVTN" class="normal-table-wrap">
    <nz-card nzHoverable [nzBodyStyle]="{ 'padding-bottom': 0 }" class="m-b-10">
        <form nz-form>
            <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24 }">
                <div nz-col [nzXXl]="8" [nzXl]="8" [nzLg]="8" [nzMd]="12" [nzSm]="24" [nzXs]="24">
                    <nz-form-item>
                        <nz-form-label [nzFor]="">Trạng thái</nz-form-label>
                        <nz-form-control>
                            <nz-radio-group id="status01" name="status01" [(ngModel)]="searchParamCNDVTN.status01" (ngModelChange)="changeStatus($event)">
                                <label nz-radio nzValue="0"> Chưa thanh toán </label>
                                <label nz-radio nzValue="1"> Đã thanh toán </label>
    
                            </nz-radio-group>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-col [nzXXl]="8" [nzXl]="8" [nzLg]="8" [nzMd]="12" [nzSm]="24" [nzXs]="24"></div>
                <div nz-col [nzXXl]="8" [nzXl]="8" [nzLg]="8" [nzMd]="12" [nzSm]="24" [nzXs]="24"  class="text-right p-0 m-b-10">
                    <button (click)="getDataListCNDVTN()" nz-button [nzType]="'primary'"> <i nz-icon nzType="search"></i>{{formItemNm[6]}}</button>
                    <button nz-button class="m-l-15" (click)="resetFormCNDVTN()"><i nz-icon nzType="close-circle" nzTheme="outline"></i>{{formItemNm[7]}}</button>
                </div>
            </div>
        </form>
        <ng-container *ngIf="tableConfigCNDVTN">
            <app-card-table-wrap [tableTitle]="TitleTableCNDVTN" (reload)="reloadTableCNDVTN()" [btnTpl]="tableBtnsCNDVTN">
                <app-ant-table 
                (selectedChange)="selectedCheckedCNDVTN($event)"
                [checkedCashArrayFromComment]="checkedCashArrayCNDVTN"
                (changePageSize)="changePageSizeCNDVTN($event)"
                (changePageNum)="getDataListCNDVTN($event)"
                [tableConfig]="tableConfigCNDVTN"
                [tableData]="dataListCNDVTN"
              ></app-ant-table>
            </app-card-table-wrap>
            <ng-template #tableBtnsCNDVTN>
                <!-- Spcm01103Checkout -->
                <button *appAuth="ActionCode.Spcm01103Checkout" (click)="checkout()" nz-button nzType="primary" class="m-r-8" [disabled]="showbtnCheckout">
                    <i nz-icon nzType="caret-right"></i>
                         Thanh Toán
                </button>
            </ng-template>
            <ng-template #TitleTableCNDVTN>
                <h3>{{titleTableCNDVTN}}</h3>
            </ng-template>
        </ng-container>
    </nz-card>
</div>
<ng-template #manhacungcapTpl let-manhacungcap="manhacungcap">
    <span>{{manhacungcap['tennhacungcap']}}</span>
</ng-template>
<ng-template #sotienCNDVTNTpl let-sotien="sotien">
    <span>{{sotien*1000 | currency : "VND"}}</span>
</ng-template>

<ng-template #trangthaiCNDVTNTpl let-status01="status01">
    <nz-alert nzType="warning" [nzMessage]="Ghichu"></nz-alert>
        <ng-template #Ghichu>
            <ng-container *ngIf="status01 == 0 else Dathanhtoan">
                <span>Chưa thanh toán</span>
            </ng-container>
            <ng-template #Dathanhtoan>
                <span>Đã thanh toán</span>
            </ng-template>
        </ng-template>
</ng-template>


